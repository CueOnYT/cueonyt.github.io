<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cuemo's Tool - Yearbook Maker</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #1a1a1a;
      color: #f0f0f0;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    header {
      background-color: #111;
      padding: 12px;
      text-align: center;
      font-size: 1.5rem;
      font-weight: bold;
      letter-spacing: 1px;
      border-bottom: 1px solid #333;
    }
    .toolbar {
      background: #222;
      padding: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      border-bottom: 1px solid #333;
    }
    .toolbar button, .toolbar input, .toolbar select {
      background: #333;
      border: none;
      color: #f0f0f0;
      padding: 8px 12px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.9rem;
    }
    .toolbar button:hover {
      background: #444;
    }
    .main {
      display: flex;
      flex: 1;
      overflow: hidden;
    }
    .sidebar {
      width: 250px;
      background: #181818;
      border-right: 1px solid #333;
      padding: 10px;
      overflow-y: auto;
    }
    .canvas-container {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      background: #121212;
      overflow: auto;
    }
    canvas {
      background: #1e1e1e;
      border: 1px solid #444;
      max-width: 100%;
      height: auto;
    }
    .photo-thumb {
      width: 70px;
      height: 70px;
      object-fit: cover;
      margin: 4px;
      border: 1px solid #444;
      border-radius: 4px;
      cursor: grab;
    }
    footer {
      background: #111;
      text-align: center;
      padding: 8px;
      font-size: 0.85rem;
      border-top: 1px solid #333;
    }
    @media (max-width: 768px) {
      .main { flex-direction: column; }
      .sidebar { width: 100%; height: 200px; border-right: none; border-bottom: 1px solid #333; }
      .canvas-container { flex: 1; }
    }
  </style>
</head>
<body>
  <header>Cuemo's Tool - Advanced Yearbook Maker</header>
  <div class="toolbar">
    <button onclick="addPage()">Add Page</button>
    <button onclick="exportPDF()">Export PDF</button>
    <button onclick="exportPNG()">Export PNG</button>
    <button onclick="toggleDarkMode()">Toggle Dark Mode</button>
    <input type="file" id="uploadPhoto" multiple accept="image/*" onchange="handleUpload(event)" />
    <select id="fontSelect" onchange="changeFont(this.value)">
      <option value="Arial">Arial</option>
      <option value="Georgia">Georgia</option>
      <option value="Courier New">Courier New</option>
      <option value="Comic Sans MS">Comic Sans</option>
    </select>
    <input type="color" id="colorPicker" onchange="changeTextColor(this.value)" />
  </div>
  <div class="main">
    <div class="sidebar">
      <h3>Photos</h3>
      <div id="photoLibrary"></div>
      <h3>Pages</h3>
      <div id="pageList"></div>
    </div>
    <div class="canvas-container">
      <canvas id="yearbookCanvas" width="800" height="1000"></canvas>
    </div>
  </div>
  <footer>Â© 2025 Cuemo's Tool - Complex Yearbook Maker</footer>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script>
    const canvas = document.getElementById('yearbookCanvas');
    const ctx = canvas.getContext('2d');
    let pages = [{ id: Date.now(), elements: [] }];
    let currentPage = 0;
    let photos = [];
    let currentFont = 'Arial';
    let currentColor = '#ffffff';
    let darkMode = true;

    function renderPage(){
      ctx.fillStyle = darkMode ? '#1e1e1e' : '#fff';
      ctx.fillRect(0,0,canvas.width,canvas.height);
      pages[currentPage].elements.forEach(el=>{
        if(el.type==='img') ctx.drawImage(el.img, el.x, el.y, el.w, el.h);
        if(el.type==='text'){
          ctx.font = `${el.size}px ${el.font}`;
          ctx.fillStyle = el.color;
          ctx.fillText(el.text, el.x, el.y);
        }
      });
    }

    function addPage(){
      pages.push({ id: Date.now(), elements: [] });
      currentPage = pages.length-1;
      updatePageList();
      renderPage();
    }

    function exportPDF(){
      html2canvas(canvas).then(cvs=>{
        const imgData = cvs.toDataURL('image/png');
        const pdf = new jspdf.jsPDF({orientation:'portrait', unit:'px', format:[canvas.width,canvas.height]});
        pdf.addImage(imgData,'PNG',0,0,canvas.width,canvas.height);
        pdf.save('yearbook.pdf');
      });
    }

    function exportPNG(){
      canvas.toBlob(blob=>{ const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='yearbook.png'; a.click(); });
    }

    function toggleDarkMode(){
      darkMode = !darkMode;
      document.body.style.backgroundColor = darkMode ? '#1a1a1a' : '#f8f8f8';
      document.body.style.color = darkMode ? '#f0f0f0' : '#111';
      renderPage();
    }

    function handleUpload(e){
      [...e.target.files].forEach(f=>{
        const reader = new FileReader();
        reader.onload = ev => {
          const img = new Image();
          img.onload=()=>{ photos.push(img); addPhotoThumb(img); };
          img.src=ev.target.result;
        };
        reader.readAsDataURL(f);
      });
    }

    function addPhotoThumb(img){
      const div=document.createElement('img');
      div.src=img.src;
      div.className='photo-thumb';
      div.onclick=()=>{
        pages[currentPage].elements.push({type:'img', img, x:50,y:50,w:200,h:200});
        renderPage();
      };
      document.getElementById('photoLibrary').appendChild(div);
    }

    function updatePageList(){
      const list=document.getElementById('pageList');
      list.innerHTML='';
      pages.forEach((pg,i)=>{
        const btn=document.createElement('button');
        btn.innerText='Page '+(i+1);
        btn.onclick=()=>{currentPage=i;renderPage();};
        list.appendChild(btn);
      });
    }

    function changeFont(font){ currentFont = font; }
    function changeTextColor(c){ currentColor = c; }

    canvas.addEventListener('dblclick', e=>{
      const text=prompt('Enter text:');
      if(text){
        pages[currentPage].elements.push({type:'text', text, x:e.offsetX,y:e.offsetY, font:currentFont, size:20, color:currentColor});
        renderPage();
      }
    });

    updatePageList();
    renderPage();
  </script>
</body>
</html>
